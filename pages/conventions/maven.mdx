---
title: 'Apache Maven'
description: 'Conventions for crafting the `pom.xml` file for maven projects.'
---

# General

- Do not use `mvnw` or `mvnw.cmd` files, instead use `mvn` command.
- Use `mvn clean package` command to build the project.

# XML structure of the `pom.xml` file

- https://maven.apache.org/pom.html
- Use the following XML structure as example to organize high-level tags inside the `pom.xml` file:

```markdown
    - project
        - parent
        
        - groupId
        - artifactId
        - version
        - packaging
        
        - properties

        - dependencies
        - dependencyManagement
        
        - profiles
        
        - modules

        - build
        
        - scm
        - distributionManagement
        - name
        - description
        - url
        - inceptionYear
        - licenses
        - organization
        - developers
        - contributors
      
        - issueManagement
        - ciManagement
        - mailingLists
        - prerequisites
        - repositories
```
- Use `springdoc-openapi-maven-plugin` to generate the OpenAPI documentation:
    - https://github.com/springdoc/springdoc-openapi-maven-plugin
    - Example:
    ```xml
        <plugin>
            <groupId>org.springdoc</groupId>
            <artifactId>springdoc-openapi-maven-plugin</artifactId>
            <version>1.5</version>
            <executions>
                <execution>
                    <id>integration-test</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    ```
- Use mapstruct for mapping between entities and DTOs:
    - https://mapstruct.org/
    - Example:
    ```xml
            <!--...-->
            <properties>
                <org.mapstruct.version>1.6.3</org.mapstruct.version>
            </properties>
            <!--...-->
            <dependencies>
                <dependency>
                    <groupId>org.mapstruct</groupId>
                    <artifactId>mapstruct</artifactId>
                    <version>${org.mapstruct.version}</version>
                </dependency>
            </dependencies>
            <!--...-->
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <version>3.8.1</version>
                        <configuration>
                            <source>1.8</source> <!-- depending on your project -->
                            <target>1.8</target> <!-- depending on your project -->
                            <annotationProcessorPaths>
                                <path>
                                    <groupId>org.mapstruct</groupId>
                                    <artifactId>mapstruct-processor</artifactId>
                                    <version>${org.mapstruct.version}</version>
                                </path>
                                <!-- other annotation processors -->
                            </annotationProcessorPaths>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
    ```

- Use the `git-commit-id-plugin` for generating commit IDS.
    - https://github.com/git-commit-id/git-commit-id-maven-plugin
    - Example:
    - ```xml
        <plugin>
            <groupId>io.github.git-commit-id</groupId>
                <artifactId>git-commit-id-maven-plugin</artifactId>
                <version>9.0.2</version>
                <executions>
                <execution>
                    <id>get-the-git-infos</id>
                    <goals>
                        <goal>revision</goal>
                    </goals>
                    <phase>initialize</phase>
                </execution>
            </executions>
                <configuration>
                <generateGitPropertiesFile>true</generateGitPropertiesFile>
                <generateGitPropertiesFilename>${project.build.outputDirectory}/git.properties</generateGitPropertiesFilename>
                <commitIdGenerationMode>full</commitIdGenerationMode>
            </configuration>
        </plugin>
      ```

# General principles

- Organize dependencies in the `dependencies` section by grouping them by `scope` and keeping the following order:
    - `compile` for compile-time dependencies.
    - `provided` for dependencies that are provided by the runtime environment.
    - `runtime` for dependencies that are required at runtime but not at compile time.
    - `test` for test dependencies.
- Use **properties** to define common values that can be used across the project.
- Use **properties** to define version values of the dependencies.
