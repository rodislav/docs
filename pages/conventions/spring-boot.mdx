---
title: 'Spring Boot'
description: 'Coding conventions for **Spring Boot** based applications'
---

<Info>
  **Note**: This document outlines the coding conventions when using Spring Boot framework.
</Info>

# Code style

- Use latest stable version of Spring Boot.
- Generate a banner with the name of the application.

- Use constructor-based dependency injection.
- Do not use field dependency injection.
- Do not use `@Autowired` annotation for dependency injection.

- Avoid using `@ComponentScan` annotation, instead use `@SpringBootApplication` annotation which includes component scanning by default.

- Use `@Service`, `@Repository`, and `@Controller` annotations to define service, repository, and controller classes respectively.
- Use `@Component` for generic components.
- Use `@Bean` annotation to define beans in configuration classes.
- Use `@Transactional` annotation only if it is required and only in the classes annotated with `@Service` annotation.

- Use suffixes like `Service`, `Repository`, `Controller`, `DTO`, `Entity` and `Configuration` for class names.

# Hierarchy

- **Controllers** shall not call **Repositories** directly, instead use a "service layer" to handle the business logic.
- **Services** shall call directly: **Repositories**, **Helpers**, other components.
- Spring Security annotations shall be used only at the **Controller** level or at the **Service** level, not in any other places.

# Configuration

- Use `.properties` files for configuration, and avoid using `application.yml` or `application.yaml` files.
- Use `@Configuration` for configuration classes.
- Do not use `@Value` annotation for injecting configuration properties, instead use `@ConfigurationProperties` for binding configuration properties to classes which are used via constructor injection.
- Use spring configuration processing features like `@ConfigurationProperties` for binding configuration properties to classes and generate properties files for auto-completion.

# Common libraries

- Use **MapStruct** for mapping operations.
- Use JSpecify annotations for type safety.

- Use `lombok` for reducing boilerplate code.
- Use `liquibase` for SQL migrations.

- Use `springdoc-openapi` for documenting APIs and DTOs.
- Use `spring-boot-starter-test` for unit testing.
- Use `spring-boot-starter-actuator` for monitoring and management.
- Use `spring-boot-devtools` for hot-reloading.
- Use `spring-boot-starter-security` for authentication and authorization.
- Use `spring-boot-starter-validation` for validation.
- Use `spring-boot-starter-data-jpa` for JPA.
- Use `spring-boot-starter-web` for web APIs.

# Logging

- Use `org.slf4j.Logger` for logging.
- Use `org.slf4j.LoggerFactory` for creating loggers.
- Use `org.slf4j.MDC` for logging context.

# Lombok

- Favor using `@Getter` and `@Setter` annotations instead of `@Data` annotation.
- Favor using `@RequiredArgs` annotation, and define as **final** internal variables that are required for the class to work.
- When an "Entity" has a field annotated with `@Column(updatable = false)` or `@Column(insertable = false)`, use `@Setter(AccessLevel.PROTECTED)` to avoid generating setters for those fields.
- Create `lombok.config` file in the root of the project with the following content:
    ```properties
    lombok.accessors.chain=true
    lombok.addLombokGeneratedAnnotation = true
    ```

# SQL Database

- When using SQL Database, use the name of the user as the name of the schema.
- The default password for the user should be `password`.
- Use `org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate` for executing SQL queries.
- Avoid using `org.springframework.jdbc.core.JdbcTemplate` for executing SQL queries, unless absolutely necessary.

# Controllers

- Use `@RestController` annotation for controllers.
- Favor `@GetMapping`, `@PostMapping`, `@PutMapping`, `@PatchMapping`, `@DeleteMapping` annotations for mapping HTTP methods.
- Use `@RequestParam` annotation for mapping request parameters.
- Use `@Valid` annotation for validating request bodies.
- Use `@Validated` annotation for validating request bodies and request parameters.
- Use DTOs for data transfer objects and **lombok**, to reduce the boilerplate code. 
- DTOs are part of the API, not part of the "service layer".
- Do not use `ResponseEntity` for returning responses, unless absolutely necessary.
- Inject the `WebRequest request` to the corresponding controller method, instead of using `HttpServletRequest` or `HttpServletResponse`.
- Use suffix `Controller` for controller classes.

# JPA Entities

- Use `@Entity` annotation for JPA entities.
- Use `@Id` annotation for the primary key.
- Use `@GeneratedValue` annotation for primary key generation.
- Use `@Column` annotation for columns.
- Use `@Table` annotation for tables.
- Use `@OneToMany` annotation for one-to-many relationships.
- Use `@ManyToOne` annotation for many-to-one relationships.
- Use `@JoinColumn` annotation for joining columns.
- Use `@Transient` annotation for transient fields.
- Use `@SequenceGenerator` annotation for sequence generators.
- For complex primary keys, use composite keys.
- Avoid using entity relationships, instead use IDs to link entities, including for collections.
- Use suffix `Entity` for entity classes.

# Exceptions

- Use `org.springframework.web.bind.annotation.ResponseStatus` annotation for mapping HTTP status codes to exceptions.
- Generate exceptions for generic cases like: Not Found, Bad Request, etc.
- Use `org.springframework.http.HttpStatus` for HTTP status codes.

# Maven pom.xmls

- Use JIB for building OCI images.

- Use Automatic Property Expansion:
    - Eample for `application.properties` file:
        ```properties
            app.encoding=@project.build.sourceEncoding@
            app.java.version=@java.version@
        ```
    - Example in the banner file:
        ```
            ${app.name} - ${app.version} - ${app.encoding} - Java ${app.java.version}
        ```
    - Example for `pom.xml` file:
        ```xml
            <build>
                <resources>
                    <resource>
                        <directory>src/main/resources</directory>
                        <filtering>true</filtering>
                    </resource>
                </resources>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-resources-plugin</artifactId>
                        <version>2.7</version>
                        <configuration>
                        <delimiters>
                            <delimiter>@</delimiter>
                        </delimiters>
                        <useDefaultDelimiters>false</useDefaultDelimiters>
                    </configuration>
                </plugin>
            </build>
        ```
